@model Linko.LinkoExchange.Web.ViewModels.Account.PortalDirectorViewModel

@{
    ViewBag.Title = "";
    ViewBag.Description = "";
    ViewBag.SubTitle = "You have rights to multiple locations, please select one:";
}

<div class="col-md-offset-2 col-md-8 col-lg-offset-3 col-lg-5">
    <div>
        <h1 class="h3">@ViewBag.SubTitle</h1>
    </div>

    @Html.ValidationSummary(true, "", new { @class = "alert alert-danger" })

    @if (Model.Authorities.Count() > 0)
    {
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">@Label.BoxTitleSelectAuthority</h3>
        </div> <!--.box-header-->
        <section class="box-body no-padding">
            <ul class="nav nav-pills nav-stacked">
                @foreach (SelectListItem item in Model.Authorities)
                {
                <li> @Ajax.ActionLink(item.Text, "PortalDirector", "Account"
                    , new
                    {
                        id = item.Value
                    }
                    , new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnAjaxSuccess" }) </li>
                }
            </ul>
        </section><!-- /.box-body -->
    </div><!-- /.box -->
    }

    @if (Model.Industries.Count() > 0)
    {
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">@Label.BoxTitleSelectIndustry</h3>
        </div> <!--.box-header-->
        <section class="box-body no-padding">
            <ul class="nav nav-pills nav-stacked">
                @foreach (SelectListItem item in Model.Industries)
                {
                <li> @Ajax.ActionLink(item.Text, "PortalDirector", "Account"
                    , new
                    {
                    id = item.Value
                    }
                    , new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnAjaxSuccess" }) </li>
                }
            </ul>
        </section><!-- /.box-body -->
    </div><!-- /.box -->
    }
</div>

@section Scripts {
    @Scripts.Render(paths: "~/bundles/jqueryval")
    <script type="text/javascript">
        OnAjaxSuccess = function(data)
        {
            setTimeout(function ()
            {
                if (data.redirect)
                {
                    window.location.replace(data.newurl);
                }
            }, 500);
        }
    </script>
}